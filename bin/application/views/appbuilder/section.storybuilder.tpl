<div class='[{$builderboxstyle}]'> <div class='box-header'> <h3 class='box-title'>[{'StoryReportBuilder'|translate}]</h3> <div class="box-tools pull-right"> <div class="btn-group"> <button type="button" class="btn btn-primary btn-xs">Choose Report</button> <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu" role="menu"> [{section name=i loop=$widgetList}] <li><a href="javascript:void(0)" data-appid="[{$widgetList[i].appid}]" class="btn_app_select">[{$widgetList[i].name}]</a></li> [{/section}] </ul> </div> <button class="btn btn-info btn-xs" title="Prev Report" data-type="btn-prev-story"><i class="fa fa-hand-o-left"></i></button> <button class="btn btn-info btn-xs" title="Next Story" data-type="btn-next-story"><i class="fa fa-hand-o-right"></i></button> <button class="btn btn-info btn-xs" title="Add New Story" data-type="btn-add-story"><i class="fa fa-plus"></i></button> <button class="btn btn-danger btn-xs" title="Remove the current story" data-type="btn-remove-story"><i class="fa fa-remove"></i></button> </div> </div> <div class='box-body'> <div id="owl-example" class="owl-carousel"> [{if $stories}] [{section name=i loop=$stories}] <div class="item" data-appid="[{$stories[i].appid}]"> <div class="text-center"> <h2><a href="javascript:void(0)" class="x-editable" data-name="storyname" data-title="Change the story name" data-type="text" data-pk="" data-url="">[{$stories[i].title}]</a></h2> <p><a href="javascript:void(0)" class="x-editable" data-name="storydesc" data-title="Edit the story description" data-type="textarea" data-pk="" data-url="">[{$stories[i].desc}]</a></p> </div> <div class="app-body"> </div> </div> [{/section}] [{else}] <div class="item" data-appid=""> <div class="text-center"> <h2><a href="javascript:void(0)" class="x-editable" data-name="storyname" data-title="Change the story name" data-type="text" data-pk="" data-url="">Edit story title</a></h2> <p><a href="javascript:void(0)" class="x-editable" data-name="storydesc" data-title="Edit the story description" data-type="textarea" data-pk="" data-url="">This is the story description<a/></p> </div> <div class="app-body"> </div> </div> <div class="item" data-appid=""> <div class="text-center"> <h2><a href="javascript:void(0)" class="x-editable" data-name="storyname" data-title="Change the story name" data-type="text" data-pk="" data-url="">Edit story title</a></h2> <p><a href="javascript:void(0)" class="x-editable" data-name="storydesc" data-title="Edit the story description" data-type="textarea" data-pk="" data-url="">This is the story description<a/></p> </div> <div class="app-body"> </div> </div> [{/if}] </div> </div> </div> <div id="storyDIV" class="hide"> <div class="item" data-appid=""> <div class="text-center"> <h2><a href="javascript:void(0)" class="x-editable" data-name="storyname" data-title="Change the story name" data-type="text" data-pk="" data-url="">Edit story title</a></h2> <p><a href="javascript:void(0)" class="x-editable" data-name="storydesc" data-title="Edit the story description" data-type="textarea" data-pk="" data-url="">This is the story description<a/></p> </div> <div class="app-body"> </div> </div> </div> <script>$(function(){$("#owl-example").owlCarousel({navigation:true,slideSpeed:300,paginationSpeed:400,singleItem:true,autoHeight:true,addClassActive:true});$("a.btn_app_select").click(function(b){var c=[];var a=$(this).attr("data-appid");$.post("?module=App&sub=1&appid="+a,c,function(e){var d=$("div#owl-example").find("div.owl-item.active").find("div.item");d.attr("data-appid",a);d.find("div.app-body").html(e)})});$.each($("#owl-example").find("div.item"),function(a,d){var c=$(d).attr("data-appid");var b=$(d).find("div.app-body");if(c!=""){var e=[];$.post("?module=App&sub=1&appid="+c,e,function(f){b.html(f);$("#owl-example").data("owlCarousel").autoHeight()})}});$("a.x-editable").editable({container:"body"});$('button[data-type="btn-add-story"]').click(function(){$("#owl-example").data("owlCarousel").addItem($("#storyDIV").html())});$('button[data-type="btn-prev-story"]').click(function(){$("#owl-example").owlCarousel().trigger("owl.prev")});$('button[data-type="btn-next-story"]').click(function(){$("#owl-example").owlCarousel().trigger("owl.next")});$('button[data-type="btn-remove-story"]').click(function(){var a=$("#owl-example").data("owlCarousel");a.removeItem(a.currentItem)})});</script>