<style>.dropper-dropzone>img{width:100px;height:100px;margin-top:0}</style> <div class="box box-solid"> [{if $showHeader}] <div class="box-header"> <h3 class="box-title"></h3> </div>[{/if}] <div class="box-body"> <div id="error_div" class="alert alert-danger alert-dismissable" style="display:none"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> <span id="error_div_message"></span> </div> <form role="form" class="form-horizontal" id="account_form"> <input type="hidden" name="u" value="[{$account.userid}]"/> [{if isset($login_thirdpart) && $login_thirdpart}] <div class="form-group"> <div class="col-sm-12"> <p class="form-control-static">[{'strThirdPartLogin'|translate}]</p> </div> </div> [{else}] <div class="form-group"> <label class="col-sm-2 control-label">[{'strUsername'|translate}]:</label> <div class="col-sm-10"> <input type="text" name="name" id="name" class="form-control" value="[{$account.name}]" required/> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">[{'strEmail'|translate}]:</label> <div class="col-sm-10"> <input type="text" name="email" id="email" class="form-control" value="[{$account.email}]" required/> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">[{'strPassword'|translate}]:</label> <div class="col-sm-10"> <input type="password" name="oldpassword" id="oldpassword" class="form-control" placeholder="Type in your current Password ..."/> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">[{'strNewPassword'|translate}]:</label> <div class="col-sm-10"> <input type="password" pattern=".{6,}" title="At least 6 characters" name="password" id="password" class="form-control" placeholder="Type in your new Password ..."/> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">[{'strConfirm'|translate}]:</label> <div class="col-sm-10"> <input type="password" pattern=".{6,}" title="At least 6 characters" name="password2" id="password2" class="form-control" placeholder="Confirm your new Password ..."/> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">Profile Image:</label> <div class="col-sm-3"> <div id="uploadtarget"></div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <button type="submit" data-widget="changeprofile" class="btn btn-primary">[{'strSubmit'|translate}]</button> </div> </div> [{/if}] </form> </div> </div> <script>$(function(){$("#account_form").submit(function(h){h.preventDefault();if($("#password").val()!=$("#password2").val()){$("#error_div_message").html("Password not matched!");$("#error_div").show();return}$.ajax({url:"?module=Account&action=changepsd",type:"post",dataType:"json",data:$("#account_form").serialize(),success:function(k){var i=k.result;var j=k.message;if(!i){$("#error_div_message").html("<b>Error!</b>"+j);$("#error_div").attr("class","alert alert-danger alert-dismissable");$("#error_div").show()}else{$("#error_div_message").html(j);$("#error_div").attr("class","alert alert-success alert-dismissable");$("#error_div").show()}}})});function c(i,h){}function g(j,i,h){}function a(i,h){}function f(j,h,i){}function e(k,i,h){if(h.indexOf("!message!")==0){var l=h.substring("!message!".length);$.scojs_message(l,$.scojs_message.TYPE_ERROR);return}$(".dropper-dropzone").empty();$("#imgPreview").remove();$(".dropper-dropzone").append('<img id="imgPreview"/><span style="display:none">Upload Avatar</span>');var j=$(".dropper-dropzone").attr("width");$("#imgPreview").attr({width:j});$("#imgPreview").attr({src:h})}function d(j,i,h){$.scojs_message("File Upload Error: "+h,$.scojs_message.TYPE_ERROR)}function b(){var h=$("#delimiter").val();var i=$("#linedelimiter").val();var j=$("#enclosure").val();return"?module=Account&action=uploadavatar"}$("#uploadtarget").dropper({action:b,label:"",postKey:"userfile",maxSize:524288000}).on("start.dropper",c).on("complete.dropper",g).on("fileStart.dropper",a).on("fileProgress.dropper",f).on("fileComplete.dropper",e).on("fileError.dropper",d);$(".dropper-dropzone").append('<img id="imgPreview" src="[{$useravatar}]"/><span style="display:none"></span>')});</script>