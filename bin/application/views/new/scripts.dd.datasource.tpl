<div class="[{$builderboxstyle}]"> <div class="box-header"> <h3 class="box-title">[{'strDatasource'|translate}]</h3> </div> <div class="box-body"> <form role="form" id="datasourceForm" class="form-horizontal"> <input type="hidden" id="rpf" name="rpf" value="0"/> <div id="adv_rep_join_content"> <div class="advrep_div row pad"> <div class="input-group col-sm-12 col-md-5"> <select class="form-control input-sm" name="tablename[]" data-widget="select_tablenames" id="tablename" onchange="javascript:datasource_changetable();set_columns(this.value, this);"> <option value="" selected>-- Table --</option> [{section name=i loop=$tablenames}] <option value="[{$tablenames[i]}]" [{if $tablenames[i] == $tablename[0]}]selected[{/if}]>[{$tablenames[i]}]</option> [{/section}] </select> <div class="input-group-addon"> <a title="Add join..." href="javascript:void(0);" onclick="javascript:advrep_addjoin(this);return false;"><i class="fa fa-plus"></i></a> </div> </div> </div> [{section name=i loop=$jointype}] <div class="advrep_div row pad"> <div class="col-xs-2 col-md-1 no-padding"> <select name="jointype[]" class="form-control input-sm"> <option value="join" [{if $jointype[$i] == 'join'}]selected[{/if}]>JOIN</option> <option value="leftjoin" [{if $jointype[$i] == 'leftjoin'}]selected[{/if}]>LEFT JOIN</option> <option value="rightjoin" [{if $jointype[$i] == 'rightjoin'}]selected[{/if}]>RIGHT JOIN</option> </select> </div> [{assign var='joinIndex' value=$smarty.section.i.index}] <div class="col-xs-2 col-md-2"> <select name="tablename[]" class="sel_tbl form-control input-sm" data-widget="select_tablenames" onchange="javascript:datasource_changetable();set_columns(this.value, this);"> <option value="" selected>-- Table --</option> [{section name=j loop=$tablenames}] <option value="[{$tablenames[j]}]" [{if $tablenames[j] == $tablename[$joinIndex+1]}]selected[{/if}]>[{$tablenames[j]}]</option> [{/section}] </select> </div> <div class="col-xs-4 col-md-3"> <div class="input-group"> <span class="input-group-addon">ON</span> <select name="left_columnname[]" class="left form-control input-sm"> [{section name=j loop=$columnsInfoByTable[$tablename[$joinIndex]]}] <option value="[{$tablename[$joinIndex]}].[{$columnsInfoByTable[$tablename[$joinIndex]][j]}]" [{if $tablename[$joinIndex]|cat:"."|cat:$columnsInfoByTable[$tablename[$joinIndex]][j] == $left_columnname[$joinIndex]}]selected[{/if}]>[{$columnsInfoByTable[$tablename[$joinIndex]][j]}]</option> [{/section}] </select> </div> </div> <div class="col-xs-4 col-md-3"> <div class="input-group"> <span class="input-group-addon">Equal</span> <select name="right_columnname[]" class="right form-control input-sm"> [{section name=j loop=$columnsInfoByTable[$tablename[$joinIndex+1]]}] <option value="[{$tablename[$joinIndex+1]}].[{$columnsInfoByTable[$tablename[$joinIndex+1]][j]}]" [{if $tablename[$joinIndex+1]|cat:"."|cat:$columnsInfoByTable[$tablename[$joinIndex+1]][j] == $right_columnname[$joinIndex]}]selected[{/if}]>[{$columnsInfoByTable[$tablename[$joinIndex+1]][j]}]</option> [{/section}] </select> <div class="input-group-addon"> <a href="javascript:void(0);" onclick="javascript:advrep_deljoin(this);return false;"><i class="fa fa-minus"></i></a> </div> </div> </div> </div> [{/section}] </div> </form> </div> </div>